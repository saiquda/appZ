@{
    ViewData["Title"] = "Home Page";
}
@model CountriesSubjectsCitiesViewModel

<ul class="nav nav-tabs">
    @foreach (var item in Model.Countries)
    {
    <li class="nav-item">
        <button class = "nav-link" @*asp-controller="Home" asp-action="Index" asp-route-CountryId="@item.Id"*@ data-CountryId="@item.Id">@item.Name</button>
    </li>
    }
</ul>

<div class="tab-content">
    <div class="tab-pane fade show active" id="description">
        <table class ="ttable" border="0" cellpadding="0" cellspacing="2" id="ttable">
            <tr>
                <td>
                    @await Component.InvokeAsync("SubjectsTable", Model.SubjectsBinding)
                </td>
                <td>
                    @await Component.InvokeAsync("CitiesTable",Model.Binding)
                </td>
            </tr>
        </table>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $(".subject").click(function (event) {
            $.ajax({
                url: '@Url.Action("GetCities")' + '?SubjectId=' + event.target.dataset.subjectid,
                type: "POST",
                success: function (result) {
                    document.getElementById("cities-table").innerHTML = result;
                    console.log(result);
                    return false;
                }
            });
        });
    });
    $(document).ready(function () {
        $(".nav-link").click(function (event) {
            $.ajax({
                url: '@Url.Action("GetSubjects")' + '?CountryId=' + event.target.dataset.countryid,
                type: "POST",
                success: function (result) {
                    document.getElementById("subjects-table").innerHTML = result;
                    consol.log(result);
                    return false;
                }
            });
        });
    });
</script>